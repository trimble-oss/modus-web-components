import { Story } from '@storybook/addon-docs';

# Data Table

<modus-alert type="warning" message="This component is under construction!"></modus-alert>

---

[Modus Data Table](https://modus.trimble.com/components/tables/) web components are wrappers around the HTML table element. Modus Data Table is reusable and customizable UI element that can be used to display data in a tabular format. They are referenced using the `<modus-data-table>` custom HTML element.

## Overview

- [Default](#default)
- [Hover](#hover)
- [Borderless](#borderless)
- [Sorting](#sorting)
- [Column Resize](#column-resize)
- [Properties](#properties)
- [Events](#events)
- [Accessibility](#accessibility)

---

### Default

Basic table that outputs data in tabular format after accepting `data` and `column` as input.

<Story id="components-data-table--default" height={'340px'} />

```html
<div style="width: 800px">
  <modus-data-table hover="false" sort="false" />
</div>
<script>
  document.querySelector('modus-data-table').columns = [
    {
      header: 'First Name',
      accessorKey: 'firstName',
      id: 'first-name',
      dataType: 'text',
    },
    {
      header: 'Last Name',
      accessorKey: 'lastName',
      id: 'last-name',
      dataType: 'text',
    },
    { header: 'Age', accessorKey: 'age', id: 'age', dataType: 'integer' },
    {
      header: 'Visits',
      accessorKey: 'visits',
      id: 'visits',
      dataType: 'integer',
    },
    { header: 'Status', accessorKey: 'status', id: 'status', dataType: 'text' },
    {
      header: 'Profile Progress',
      accessorKey: 'progress',
      id: 'progress',
      dataType: 'integer',
    },
    {
      header: 'Created At',
      accessorKey: 'createdAt',
      id: 'createdAt',
      dataType: 'date',
    },
  ];
  document.querySelector('modus-data-table').data = [
    {
      firstName: 'Gordon',
      lastName: 'Lemke',
      age: 40,
      visits: 434,
      progress: 97,
      status: 'single',
      createdAt: '2002-11-21T12:48:51.739Z',
    },
    {
      firstName: 'Elliott',
      lastName: 'Bosco',
      age: 21,
      visits: 348,
      progress: 60,
      status: 'complicated',
      createdAt: '2012-02-08T12:14:22.776Z',
    },
    {
      firstName: 'Agnes',
      lastName: 'Breitenberg',
      age: 34,
      visits: 639,
      progress: 84,
      status: 'single',
      createdAt: '1995-04-07T07:24:57.577Z',
    },
    {
      firstName: 'Nicolette',
      lastName: 'Stamm',
      age: 13,
      visits: 518,
      progress: 28,
      status: 'relationship',
      createdAt: '2009-07-28T14:29:51.505Z',
    },
  ];
</script>
</html>
```

### Hover

This displays the highlighted row where the cursor is currently located.

- Hover is disable by default, set `hover` to `true` to enable hover.

<Story id="components-data-table--hover" height={'350px'} />

### Borderless

Table has two views one with border and another is borderless.

- Table with a border is shown by default. There are two options under `displayOptions`: `borderless` and `cellborderless`.
- To eliminate the outer table border, set `borderless` to `true`.
- Set `cellborderless` to `true` remove the innter table border i.e. for the border for cells.

<Story id="components-data-table--borderless" height={'350px'} />

### Sorting

Users can arrange data in a table by sorting it in either ascending or descending order. The sort icon will be visible when enabled.

- Sorting is disabled by default. The way to activate it is to set `sort` to `true`.
- Every column has sorting turned on by default. Setting `enableSorting` `true` or `false` for a certain column will enable or disable it.
- When enabled, the sort icon's initial click will sort in ascending order, while its second click will sort in descending order.
- Set `showSortIconOnHover` to `true` to enable sort on hover as well.

<Story id="components-data-table--sorting" height={'350px'} />

### Column Resize

The column sizing feature allows users to dynamically change the width of all columns by dragging the column headers. When hovering above the dividing line between two columns, there is a visual indicator that shows the column is adjustable.

### Note:

- By default, a column can be resized with table responsiveness and other columns will be adjusted to fit within the confines of the table.
- By setting `fullWidth` to false, the table will get a fixed size by calculating the sum of the sizes of all columns and resizing a column will not impact others.
- Optionally you can specify the width of each column using `size`, `minSize` and `maxSize` to limit the resizing of a column to a specific value.

<Story id="components-data-table--column-resize" height={'350px'} />

```html
<div style="width: 800px">
   <modus-data-table column-resize="true" full-width="false" />
</div>
 <script>
    document.querySelector('modus-data-table').columns = [
      {
        header: 'First Name',
        accessorKey: 'firstName',
        id: 'first-name',
        dataType: 'text',
        size: 120,
      },
      {
        header: 'Last Name',
        accessorKey: 'lastName',
        id: 'last-name',
        dataType: 'text',
        size: 120,
      },
      {
        header: 'Age',
        accessorKey: 'age',
        id: 'age',
        dataType: 'integer',
        size: 55,
      },
      {
        header: 'Visits',
        accessorKey: 'visits',
        id: 'visits',
        dataType: 'integer',
        maxSize: 80,
        minSize: 80,
        enableResizing: false,
      },
      {
        header: 'Status',
        accessorKey: 'status',
        id: 'status',
        dataType: 'text',
      },
      {
        header: 'Profile Progress',
        accessorKey: 'progress',
        id: 'progress',
        dataType: 'integer',
        minSize: 100,
      },
      {
        header: 'Created At',
        accessorKey: 'createdAt',
        id: 'createdAt',
        dataType: 'date',
        size: 124,
        minSize: 100,
      },
    ];
    document.querySelector('modus-data-table').data = [
      {
        firstName: 'Gordon',
        lastName: 'Lemke',
        age: 40,
        visits: 434,
        progress: 97,
        status: 'single',
        createdAt: '2002-11-21T12:48:51.739Z',
      },
      ...
    ];
  </script>
</html>
```

### Properties

| Property              | Attribute             | Description                                     | Type                     | Default     |
| --------------------- | --------------------- | ----------------------------------------------- | ------------------------ | ----------- |
| `columns`             | `columns`             | (required) To display headers in the table.     | `ModusDataTableColumn[]` | `undefined` |
| `data`                | `data`                | (required) To display data in the table.        | `Array`                  | `undefined` |
| `hover`               | `hover`               | (optional) To enable row hover in table.        | `boolean`                | `false`     |
| `sort`                | `sort`                | (optional) To sort data in table.               | `boolean`                | `false`     |
| `showSortIconOnHover` | `showSortIconOnHover` | (optional) To display sort icon on hover.       | `boolean`                | `false`     |
| `displayOptions`      | `displayOptions`      | (optional) To control display options of table. | `boolean`                | `false`     |
| `columnResize`        | `column-resize`       | (optional) To enable column resizing of table.  | `boolean`                | `false`     |
| `fullWidth`           | `full-width`          | (optional) To manage table width.               | `boolean`                | `true`      |

### Events

| Name      | Description                         | Emits                             |
| --------- | ----------------------------------- | --------------------------------- |
| `sorting` | An event that fires on sort change. | `[{ id: string, desc: boolean }]` |

### Accessibility

Users can use keyboard navigation to perform different action.

| Name    | Description                                                                                                           |
| ------- | --------------------------------------------------------------------------------------------------------------------- |
| Sorting | The `tab` key is used for navigating between the sort icons, while the `enter` key is used to interact with the icon. |
