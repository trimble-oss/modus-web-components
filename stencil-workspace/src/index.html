<!doctype html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trimble Modus Web Components</title>

    <script type="module" src="/build/modus-web-components.esm.js"></script>
    <script nomodule src="/build/modus-web-components.js"></script>

    <link rel="stylesheet" href="/build/modus-web-components.css" />

    <!--Manually load Modus font-family-->
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link rel="stylesheet" src="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" />
  </head>

  <body data-mwc-theme="light">
    <main>
      <!-- Test components -->
      <div id="dataTemplate">
        <modus-switch id="switch-theme" label="Enable blue theme"></modus-switch>
        <br />
        <modus-switch id="switch-mode" label="Enable Push Side Navigation"></modus-switch>
        <div
          style="width: 100%;align-items: center;height: 56px;box-shadow: 0 0 2px var(--modus-secondary)!important; margin-top: 10px;">
          <modus-navbar id="navbar" show-apps-menu show-help show-main-menu show-notifications> </modus-navbar>
        </div>

        <div
          id="container"
          style="display:flex; min-height:500px; overflow-y: auto; position: relative;box-shadow: 0 0 2px var(--modus-secondary)!important;">
          <modus-side-navigation max-width="300px" id="sideNav" target-content="#dataTemplate #panelcontent" mode="overlay">
          </modus-side-navigation>

          <div id="panelcontent" style="padding:10px; transition: all 0.25s linear 0s;">
            <div id="overview">
              <p>
                The side navigation of an application provides context through accessible menu options and positions a consistent
                component to connect to various pages in the application.
              </p>
              <p>
                The side navigation is a collapsible side content of the site’s pages. It is located alongside the page’s primary
                content. The component is designed to add side content to a fullscreen application. It is activated through the
                “hamburger” menu in the Navbar.
              </p>
            </div>
          </div>
        </div>
      </div>

      <script>
        document.querySelector('#navbar').logoOptions = {
          primary: {
            url: 'https://modus.trimble.com/img/trimble-logo.svg',
          },
        };
        document.querySelector('#navbar').profileMenuOptions = {
          avatarUrl: 'https://avatar.example.com/broken-image-link.png',
          email: 'modus_user@trimble.com',
          initials: 'MU',
          username: 'Modus User',
        };

        const homeIcon = 'home';
        const usageIcon = 'flowchart';
        const stylesIcon = 'bar_graph_line';
        const accessibilityIcon = 'screen';

        const selectionHandler = (e) => {
          if (e.detail) {
            console.log('Selected item:', e.detail);
            const panel = document.querySelector('#panelcontent');
            document.querySelector('#sidenav-content-title')?.remove();
            const el = document.createElement('h3');
            el.id = 'sidenav-content-title';
            el.innerHTML = (e.target?.label || e.detail.id) || 'Home page';
            panel.insertBefore(el, document.querySelector('#overview'));
          }
        };

        const blueTheme = `--modus-side-navigation-link-color:#ffffff;--modus-side-navigation-bg:#0e416c;--modus-side-navigation-item-color:#ffffff;--modus-side-navigation-item-active-bg:#217cbb;--modus-side-navigation-item-hover-bg:#0063a3;--modus-side-navigation-item-icon-color:#ffffff;--modus-side-navigation-item-chevron-color:#ffffff;--modus-side-navigation-item-icon-filter:invert(100%) sepia(0%) saturate(24%) hue-rotate(114deg) brightness(108%) contrast(108%);`;

        function initialize() {
          const sidenav = document.querySelector('modus-side-navigation');
          sidenav.data = [
          {
              id: 'header',
              menuIcon: "calendar",
              label: 'Header',
              isHeader: true,
              onSideNavItemClicked: selectionHandler,
            },
            {
              id: 'home-menu',
              menuIcon: homeIcon,
              label: 'Home page 1',
              children: [
                {
                  id: 'home-menu-2',
                  menuIcon: homeIcon,
                  label: 'Home page 2',
                  onSideNavItemClicked: selectionHandler,
                },
                {
                  id: 'usage-menu-2',
                  children: [
                    {
                      id: 'home-menu-3',
                      menuIcon: homeIcon,
                      label: 'Home page 3',
                      onSideNavItemClicked: selectionHandler,
                    },
                  ],
                  menuIcon: usageIcon,
                  label: 'Usage page 2',
                },
              ],
            },
            {
              id: 'usage-menu',
              menuIcon: usageIcon,
              label: 'Usage page 1',
              onSideNavItemClicked: selectionHandler,
            },
            {
              id: 'styles-menu',
              menuIcon: stylesIcon,
              label: 'Styles page 1',
              onSideNavItemClicked: selectionHandler,
            },
            {
              id: 'accessibility-menu',
              menuIcon: accessibilityIcon,
              label: 'Accessibility page 1',
              onSideNavItemClicked: selectionHandler,
            },
          ];
        }

        function addEventHandlers() {
          document.addEventListener('sideNavListItemClicked', selectionHandler);
          document.addEventListener('mainMenuClick', (e) => {
            const panel = document.querySelector('modus-side-navigation');

        panel.expanded = !panel.expanded;
          });

          document.querySelector('#switch-theme').addEventListener('switchClick', (e) => {
            const sidenav = document.querySelector('modus-side-navigation');
            if (e.detail) {
              sidenav.style = blueTheme;
            } else sidenav.style = '';
          });

          document.querySelector('#switch-mode').addEventListener('switchClick', (e) => {
            const sidenav = document.querySelector('modus-side-navigation');
            sidenav.mode = sidenav.mode === 'push' ? 'overlay' : 'push';
          });
        }

        initialize();
        addEventHandlers();
      </script>

    </main>
  </body>
</html>
